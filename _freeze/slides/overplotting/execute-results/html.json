{
  "hash": "bf81e06016a2e897d998f4f5645e94d3",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Dealing with issues of overplotting\"\nauthor: \"Claus O. Wilke\"\ndate: last-modified\nformat: \n  revealjs:\n    theme:\n      - default\n      - Wilke-theme.scss\n    auto-stretch: false\n    chalkboard: true\nexecute:\n  fig-format: svg\n  fig-asp: 0.618\n  fig-width: 5.5\n---\n\n\n\n\n\n\n## Be aware of points plotted exactly on top of one another\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/mpg-cty-displ-solid-1.svg){width=60%}\n:::\n:::\n\n\n\n::: {.fragment .small-font .move-up-1em}\nTechnical term for this problem: overplotting\n:::\n\n## Partial transparency helps highlight overlapping points\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/mpg-cty-displ-transp-1.svg){width=60%}\n:::\n:::\n\n\n\n## A little jitter shows overlaps even more clearly\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/mpg-cty-displ-jitter-1.svg){width=60%}\n:::\n:::\n\n\n\n## But don't jitter too much\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/mpg-cty-displ-extreme-1.svg){width=60%}\n:::\n:::\n\n\n\n# 2D density plots: Contour lines and contour bands\n\n## Contour lines are the 2D version of density plots\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/blue-jays-scatter-1.svg){width=70%}\n:::\n:::\n\n\n\n## Contour lines are the 2D version of density plots\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/blue-jays-contour-1.svg){width=70%}\n:::\n:::\n\n\n\n## We can vary shading for added effect\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/blue-jays-contour-filled-1.svg){width=70%}\n:::\n:::\n\n\n\n## What do we do when there are multiple groups?\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/blue-jays-no-contour-by-sex-1.svg){width=70%}\n:::\n:::\n\n\n\n## Colored contour lines can work for 2 to 3 groups\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/blue-jays-contour-by-sex-1.svg){width=70%}\n:::\n:::\n\n\n\n## What if there are multiple groups intermingled?\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/diamonds-points-1.svg){width=70%}\n:::\n:::\n\n\n\n## Don't make plots that look like spaghetti\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/diamonds-contours-1.svg){width=70%}\n:::\n:::\n\n\n\n## Contour lines work well with small multiples (facets)\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/diamonds-contour-facets-1.svg){width=90%}\n:::\n:::\n\n\n\n# 2D histograms: Rectangular and hex bins\n\n## 2D histograms: rectangular bins\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/diamonds-bin2d-facets-1.svg){width=80%}\n:::\n:::\n\n\n\n::: {.fragment .small-font .move-up-2em}\nWe need to choose a bin size as in regular histograms\n:::\n\n## 2D histograms: rectangular bins\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/diamonds-bin2d-facets2-1.svg){width=80%}\n:::\n:::\n\n\n\n::: {.small-font .move-up-2em}\nWe need to choose a bin size as in regular histograms\n:::\n\n## 2D histograms: hex bins\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/diamonds-hexbin-facets-1.svg){width=80%}\n:::\n:::\n\n\n\n## 2D histograms: hex bins\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/diamonds-hexbin-facets2-1.svg){width=80%}\n:::\n:::\n\n\n\n## Choosing the right color scale\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/diamonds-hexbin-facets-sunset-dark-1.svg){width=80%}\n:::\n:::\n\n\n\n::: {.small-font .move-up-2em}\npalette: SunsetDark\n:::\n\n## Choosing the right color scale\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/diamonds-hexbin-facets-batlow-1.svg){width=80%}\n:::\n:::\n\n\n\n::: {.small-font .move-up-2em}\npalette: Batlow\n:::\n\n## Choosing the right color scale\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/diamonds-hexbin-facets-ylorrd-1.svg){width=80%}\n:::\n:::\n\n\n\n::: {.small-font .move-up-2em}\npalette: YlOrRd\n:::\n\n## Choosing the right color scale\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/diamonds-hexbin-facets-bluyl-1.svg){width=80%}\n:::\n:::\n\n\n\n::: {.small-font .move-up-2em}\npalette: BluYl\n:::\n\n\n## Choosing the right color scale\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/diamonds-hexbin-facets-heat-1.svg){width=80%}\n:::\n:::\n\n\n\n::: {.small-font .move-up-2em}\npalette: Heat\n:::\n\n## Choosing the right color scale\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/diamonds-hexbin-facets-ag_GrnYl-1.svg){width=80%}\n:::\n:::\n\n\n\n::: {.small-font .move-up-2em}\npalette: ag_GrnYl\n:::\n\n\n## Choosing the right color scale\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/diamonds-hexbin-facets-sunset-dark2-1.svg){width=80%}\n:::\n:::\n\n\n\n::: {.small-font .move-up-2em}\npalette: SunsetDark\n:::\n\n<!-- Segment ends here -->\n\n# Creating 2D density plots and histograms in R\n\n## Contour lines\n\n::: {.fragment .small-font}\nGetting the data:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nblue_jays <- read_csv(\"https://wilkelab.org/SDS366/datasets/blue_jays.csv\")\n\nblue_jays\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 123 × 8\n   bird_id    sex   bill_depth_mm bill_width_mm bill_length_mm head_length_mm\n   <chr>      <chr>         <dbl>         <dbl>          <dbl>          <dbl>\n 1 0000-00000 M              8.26          9.21           25.9           56.6\n 2 1142-05901 M              8.54          8.76           25.0           56.4\n 3 1142-05905 M              8.39          8.78           26.1           57.3\n 4 1142-05907 F              7.78          9.3            23.5           53.8\n 5 1142-05909 M              8.71          9.84           25.5           57.3\n 6 1142-05911 F              7.28          9.3            22.2           52.2\n 7 1142-05912 M              8.74          9.28           25.4           57.1\n 8 1142-05914 M              8.72          9.94           30             60.7\n 9 1142-05917 F              8.2           9.01           22.8           52.8\n10 1142-05920 F              7.67          9.31           24.6           54.9\n# ℹ 113 more rows\n# ℹ 2 more variables: body_mass_g <dbl>, skull_size_mm <dbl>\n```\n\n\n:::\n:::\n\n\n:::\n\n## Contour lines\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nblue_jays |>\n  ggplot() +\n  aes(body_mass_g, head_length_mm) +\n  geom_point() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/scatter-demo-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n## Contour lines\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nblue_jays |>\n  ggplot() +\n  aes(body_mass_g, head_length_mm) +\n  geom_density_2d() +\n  geom_point() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/contour-lines-demo-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n## Contour lines\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nblue_jays |>\n  ggplot() +\n  aes(body_mass_g, head_length_mm) +\n  geom_density_2d(bins = 5) +\n  geom_point() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/contour-lines-demo2-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n## Contour bands\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nblue_jays |>\n  ggplot() +\n  aes(body_mass_g, head_length_mm) +\n  geom_density_2d_filled(bins = 5) +\n  geom_point() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/contour-bands-demo-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n## Contour bands\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nblue_jays |>\n  ggplot() +\n  aes(body_mass_g, head_length_mm) +\n  geom_density_2d_filled(\n    bins = 5,\n    alpha = 0.5\n  ) +\n  geom_point() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/contour-bands-demo2-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n## Contour bands\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nblue_jays |>\n  ggplot() +\n  aes(body_mass_g, head_length_mm) +\n  geom_density_2d_filled(\n    bins = 5,\n    alpha = 0.5\n  ) +\n  geom_density_2d(\n    bins = 5,\n    color = \"black\",\n    linewidth = 0.2\n  ) +\n  geom_point() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/contour-bands-demo3-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n## 2D histograms\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nblue_jays |>\n  ggplot() +\n  aes(body_mass_g, head_length_mm) +\n  geom_bin_2d() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/bins-2d-demo-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n## 2D histograms\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nblue_jays |>\n  ggplot() +\n  aes(body_mass_g, head_length_mm) +\n  geom_bin_2d(binwidth = c(3, 3)) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/bins-2d-demo2-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n## 2D histograms\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nblue_jays |>\n  ggplot() +\n  aes(body_mass_g, head_length_mm) +\n  geom_bin_2d(binwidth = c(1, 5)) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/bins-2d-demo3-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n## 2D histograms\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nblue_jays |>\n  ggplot() +\n  aes(body_mass_g, head_length_mm) +\n  geom_bin_2d(binwidth = c(5, 1)) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/bins-2d-demo4-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n## Hex bins\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nblue_jays |>\n  ggplot() +\n  aes(body_mass_g, head_length_mm) +\n  geom_hex() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/hex-demo-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n## Hex bins\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nblue_jays |>\n  ggplot() +\n  aes(body_mass_g, head_length_mm) +\n  geom_hex(bins = 15) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/hex-demo2-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n## Hex bins\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nblue_jays |>\n  ggplot() +\n  aes(body_mass_g, head_length_mm) +\n  geom_hex(bins = 10) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](overplotting_files/figure-revealjs/hex-demo3-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n<!-- Segment ends here -->\n\n## Further reading\n\n- Fundamentals of Data Visualization: [Chapter 18: Handling overlapping points](https://clauswilke.com/dataviz/overlapping-points.html)\n- **ggplot2** reference documentation: [`geom_density_2d()`](https://ggplot2.tidyverse.org/reference/geom_density_2d.html)\n- **ggplot2** reference documentation: [`geom_bin_2d()`](https://ggplot2.tidyverse.org/reference/geom_bin_2d.html)\n- **ggplot2** reference documentation: [`geom_hex()`](https://ggplot2.tidyverse.org/reference/geom_hex.html)\n\n",
    "supporting": [
      "overplotting_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}